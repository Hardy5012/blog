{"md5":"ef1964901fb52cb8c8b5b08ef77fdcbf","content":"<nil id=\"nil\">\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\"><span class=\"section-number-2\">1</span> &#x914D;&#x7F6E; service &#x6587;&#x4EF6;</h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n</div><div id=\"outline-container-sec-1-1\" class=\"outline-3\">\n<h3 id=\"sec-1-1\"><span class=\"section-number-3\">1.1</span> &#x5728;/usr/lib/systemd/system/&#x76EE;&#x5F55;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684; service &#x6587;&#x4EF6; my.service</h3>\n<div class=\"outline-text-3\" id=\"text-1-1\">\n<div class=\"org-src-container\">\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]\nDescription=infrec\n# Wants=systemd-user-sessions.service\n# After=systemd-user-sessions.service\n\n[Service]\nEnvironment=&quot;PATH=/home/lytz/.virtualenvs/xn_infrec/bin&quot; &quot;PYTHONPATH=.:/home/lytz/app/xn_InfRec/src:/home/lytz/app/rlib-py&quot; &quot;APP_SETTINGS=/home/lytz/app/xn_InfRec/src/config.py&quot;\n #Sets the working directory for executed processes\nWorkingDirectory=/home/lytz/app/xn_InfRec/src/\n# Sets the Unix user that the processes are executed as\nUser=lytz\n# Sets the highest scheduling priority for executed processes\nNice=-20\n# disable OOM killing for this process\nOOMScoreAdjust=-1000\nExecStartPre=/bin/echo ${PYTHONPATH}\nExecStart=/home/lytz/.virtualenvs/xn_infrec/bin/gunicorn run:app --bind 0.0.0.0:9021 --worker-class sanic.worker.GunicornWorker -w 4 -t 180\n# systemd will send SIGTERM to all processes started from this service if we don&apos;t set ExecStop\n# ExecStop=-/bin/kill -15 $MAINPID\nRestart=on-failure\nRestartSec=15s\n# systemd-coredump will log the coredump including a backtrace if possible, and store the core (contents of process&apos; memory contents) in an external file on disk in /var/lib/systemd/coredump or in current working directory\n# ulimit -c unlimited\n# echo &quot;core.t%t.s%s.u%u&quot; &gt; /proc/sys/kernel/core_pattern\n# echo 1 &gt; /proc/sys/fs/suid_dumpable\n# echo 1 &gt; /proc/sys/kernel/core_uses_pid\nLimitCORE=infinity\n\n[Install]\nWantedBy=multi-user.target runlevel1.target runlevel2.target runlevel3.target runlevel4.target runlevel5.target</span><br></pre></td></tr></table></figure>\n</div>\n<!-- more -->\n<ol class=\"org-ol\">\n<li>Unit &#x533A;&#x5757;&#xFF1A;&#x542F;&#x52A8;&#x987A;&#x5E8F;&#x4E0E;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;\n</li>\n</ol>\n<p>\nUnit &#x533A;&#x5757;&#x7684; Description &#x5B57;&#x6BB5;&#x7ED9;&#x51FA;&#x5F53;&#x524D;&#x670D;&#x52A1;&#x7684;&#x7B80;&#x5355;&#x63CF;&#x8FF0;&#xFF0C;Documentation &#x5B57;&#x6BB5;&#x7ED9;&#x51FA;&#x6587;&#x6863;&#x4F4D;&#x7F6E;\n</p>\n<p class=\"verse\">\n&#xA0;&#xA0;&#xA0;After &#x5B57;&#x6BB5;&#xFF1A;my.service &#x5E94;&#x8BE5;&#x5728; After &#x670D;&#x52A1;&#x4E4B;&#x540E;&#x542F;&#x52A8;&#x3002;&#x76F8;&#x5E94;&#x5730;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E2A; Before &#x5B57;&#x6BB5;&#xFF0C;&#x5B9A;&#x4E49; my.service &#x5E94;&#x8BE5;&#x5728;&#x54EA;&#x4E9B;&#x670D;&#x52A1;&#x4E4B;&#x524D;&#x542F;&#x52A8;&#x3002;<br>\nAfter &#x548C; Before &#x5B57;&#x6BB5;&#x53EA;&#x6D89;&#x53CA;&#x542F;&#x52A8;&#x987A;&#x5E8F;&#xFF0C;&#x4E0D;&#x6D89;&#x53CA;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x3002;<br>\n&#xA0;&#xA0;&#xA0;Wants &#x5B57;&#x6BB5;&#xFF1A;&#x8868;&#x793A;&#x5B58;&#x5728;&quot;&#x5F31;&#x4F9D;&#x8D56;&quot;&#x5173;&#x7CFB;&#xFF0C;&#x5373;&#x5982;&#x679C; wants.service &#x542F;&#x52A8;&#x5931;&#x8D25;&#x6216;&#x505C;&#x6B62;&#x8FD0;&#x884C;&#xFF0C;&#x4E0D;&#x5F71;&#x54CD; my.service &#x7EE7;&#x7EED;&#x6267;&#x884C;&#x3002;Requires &#x5B57;&#x6BB5;&#x5219;&#x8868;&#x793A;&quot;&#x5F3A;&#x4F9D;&#x8D56;&quot;&#x5173;&#x7CFB;&#xFF0C;<br>\n&#x5373;&#x5982;&#x679C;&#x8BE5;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x5931;&#x8D25;&#x6216;&#x5F02;&#x5E38;&#x9000;&#x51FA;&#xFF0C;&#x90A3;&#x4E48; my.service &#x4E5F;&#x5FC5;&#x987B;&#x9000;&#x51FA;&#x3002;&#x610F;&#xFF0C;Wants &#x5B57;&#x6BB5;&#x4E0E; Requires &#x5B57;&#x6BB5;&#x53EA;&#x6D89;&#x53CA;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x4E0E;&#x542F;&#x52A8;&#x987A;&#x5E8F;&#x65E0;&#x5173;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x540C;&#x65F6;&#x542F;&#x52A8;&#x7684;&#x3002;<br>\n</p>\n<ol class=\"org-ol\">\n<li>Service &#x533A;&#x5757;&#xFF1A;&#x542F;&#x52A8;&#x884C;&#x4E3A;\n</li>\n<li>&#x542F;&#x52A8;&#x547D;&#x4EE4;\n</li>\n</ol>\n<p class=\"verse\">\nEnvironmentFile &#x5B57;&#x6BB5;&#xFF1A;&#x6307;&#x5B9A;&#x5F53;&#x524D;&#x670D;&#x52A1;&#x7684;&#x73AF;&#x5883;&#x53C2;&#x6570;&#x6587;&#x4EF6;&#x3002;&#x8BE5;&#x6587;&#x4EF6;&#x5185;&#x90E8;&#x7684; key=value &#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;$key &#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x5728;&#x5F53;&#x524D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x83B7;&#x53D6;<br>\nEnvironment &#x5B57;&#x6BB5;&#xFF1A;&#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;<br>\nWorkingDirectory &#x5B57;&#x6BB5;&#xFF1A;&#x6307;&#x5B9A;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;<br>\nExecStart &#x5B57;&#x6BB5;&#xFF1A;&#x5B9A;&#x4E49;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#x65F6;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x3002;<br>\nExecReload &#x5B57;&#x6BB5;&#xFF1A;&#x91CD;&#x542F;&#x670D;&#x52A1;&#x65F6;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;<br>\nExecStop &#x5B57;&#x6BB5;&#xFF1A;&#x505C;&#x6B62;&#x670D;&#x52A1;&#x65F6;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;<br>\nExecStartPre &#x5B57;&#x6BB5;&#xFF1A;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x4E4B;&#x524D;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;<br>\nExecStartPost &#x5B57;&#x6BB5;&#xFF1A;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;<br>\nExecStopPost &#x5B57;&#x6BB5;&#xFF1A;&#x505C;&#x6B62;&#x670D;&#x52A1;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;<br>\n</p>\n<p>\n&#x6240;&#x6709;&#x7684;&#x542F;&#x52A8;&#x8BBE;&#x7F6E;&#x4E4B;&#x524D;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;&#x8FDE;&#x8BCD;&#x53F7;&#xFF08;-&#xFF09;&#xFF0C;&#x8868;&#x793A;&quot;&#x6291;&#x5236;&#x9519;&#x8BEF;&quot;&#xFF0C;&#x5373;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x3002;\n</p>\n<ul class=\"org-ul\">\n<li>&#x542F;&#x52A8;&#x7C7B;&#x578B;\n</li>\n</ul>\n<p>\nType &#x5B57;&#x6BB5;&#x5B9A;&#x4E49;&#x542F;&#x52A8;&#x7C7B;&#x578B;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x5982;&#x4E0B;\n</p>\n<p class=\"verse\">\nsimple&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#xFF09;&#xFF1A;ExecStart &#x5B57;&#x6BB5;&#x542F;&#x52A8;&#x7684;&#x8FDB;&#x7A0B;&#x4E3A;&#x4E3B;&#x8FDB;&#x7A0B;<br>\nforking&#xFF1A;ExecStart &#x5B57;&#x6BB5;&#x5C06;&#x4EE5; fork()&#x65B9;&#x5F0F;&#x542F;&#x52A8;&#xFF0C;&#x6B64;&#x65F6;&#x7236;&#x8FDB;&#x7A0B;&#x5C06;&#x4F1A;&#x9000;&#x51FA;&#xFF0C;&#x5B50;&#x8FDB;&#x7A0B;&#x5C06;&#x6210;&#x4E3A;&#x4E3B;&#x8FDB;&#x7A0B;<br>\noneshot&#xFF1A;&#x7C7B;&#x4F3C;&#x4E8E; simple&#xFF0C;&#x4F46;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x6B21;&#xFF0C;Systemd &#x4F1A;&#x7B49;&#x5B83;&#x6267;&#x884C;&#x5B8C;&#xFF0C;&#x624D;&#x542F;&#x52A8;&#x5176;&#x4ED6;&#x670D;&#x52A1;<br>\ndbus&#xFF1A;&#x7C7B;&#x4F3C;&#x4E8E; simple&#xFF0C;&#x4F46;&#x4F1A;&#x7B49;&#x5F85; D-Bus &#x4FE1;&#x53F7;&#x540E;&#x542F;&#x52A8;<br>\nnotify&#xFF1A;&#x7C7B;&#x4F3C;&#x4E8E; simple&#xFF0C;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x540E;&#x4F1A;&#x53D1;&#x51FA;&#x901A;&#x77E5;&#x4FE1;&#x53F7;&#xFF0C;&#x7136;&#x540E; Systemd &#x518D;&#x542F;&#x52A8;&#x5176;&#x4ED6;&#x670D;&#x52A1;<br>\nidle&#xFF1A;&#x7C7B;&#x4F3C;&#x4E8E; simple&#xFF0C;&#x4F46;&#x662F;&#x8981;&#x7B49;&#x5230;&#x5176;&#x4ED6;&#x4EFB;&#x52A1;&#x90FD;&#x6267;&#x884C;&#x5B8C;&#xFF0C;&#x624D;&#x4F1A;&#x542F;&#x52A8;&#x8BE5;&#x670D;&#x52A1;&#x3002;&#x4E00;&#x79CD;&#x4F7F;&#x7528;&#x573A;&#x5408;&#x662F;&#x4E3A;&#x8BA9;&#x8BE5;&#x670D;&#x52A1;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x4E0D;&#x4E0E;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x7684;&#x8F93;&#x51FA;&#x76F8;&#x6DF7;&#x5408;<br>\n</p>\n<ul class=\"org-ul\">\n<li>&#x91CD;&#x542F;&#x884C;&#x4E3A;\n</li>\n</ul>\n<p>\nKillMode &#x5B57;&#x6BB5;&#xFF1A;&#x5B9A;&#x4E49; Systemd &#x5982;&#x4F55;&#x505C;&#x6B62;&#x670D;&#x52A1;,&#x5B57;&#x6BB5;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x5982;&#x4E0B;\n</p>\n<p class=\"verse\">\ncontrol-group&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#xFF09;&#xFF1A;&#x5F53;&#x524D;&#x63A7;&#x5236;&#x7EC4;&#x91CC;&#x9762;&#x7684;&#x6240;&#x6709;&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x90FD;&#x4F1A;&#x88AB;&#x6740;&#x6389;<br>\nprocess&#xFF1A;&#x53EA;&#x6740;&#x4E3B;&#x8FDB;&#x7A0B;<br>\nmixed&#xFF1A;&#x4E3B;&#x8FDB;&#x7A0B;&#x5C06;&#x6536;&#x5230; SIGTERM &#x4FE1;&#x53F7;&#xFF0C;&#x5B50;&#x8FDB;&#x7A0B;&#x6536;&#x5230; SIGKILL &#x4FE1;&#x53F7;<br>\nnone&#xFF1A;&#x6CA1;&#x6709;&#x8FDB;&#x7A0B;&#x4F1A;&#x88AB;&#x6740;&#x6389;&#xFF0C;&#x53EA;&#x662F;&#x6267;&#x884C;&#x670D;&#x52A1;&#x7684; stop &#x547D;&#x4EE4;&#x3002;<br>\n</p>\n<p>\nRestart &#x5B57;&#x6BB5;&#xFF1A;&#x5B9A;&#x4E49;&#x4E86; sshd &#x9000;&#x51FA;&#x540E;&#xFF0C;Systemd &#x7684;&#x91CD;&#x542F;&#x65B9;&#x5F0F;\n</p>\n<p class=\"verse\">\nno&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#xFF09;&#xFF1A;&#x9000;&#x51FA;&#x540E;&#x4E0D;&#x4F1A;&#x91CD;&#x542F;<br>\non-success&#xFF1A;&#x53EA;&#x6709;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x65F6;&#xFF08;&#x9000;&#x51FA;&#x72B6;&#x6001;&#x7801;&#x4E3A; 0&#xFF09;&#xFF0C;&#x624D;&#x4F1A;&#x91CD;&#x542F;<br>\non-failure&#xFF1A;&#x975E;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x65F6;&#xFF08;&#x9000;&#x51FA;&#x72B6;&#x6001;&#x7801;&#x975E; 0&#xFF09;&#xFF0C;&#x5305;&#x62EC;&#x88AB;&#x4FE1;&#x53F7;&#x7EC8;&#x6B62;&#x548C;&#x8D85;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x91CD;&#x542F;<br>\non-abnormal&#xFF1A;&#x53EA;&#x6709;&#x88AB;&#x4FE1;&#x53F7;&#x7EC8;&#x6B62;&#x548C;&#x8D85;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x91CD;&#x542F;<br>\non-abort&#xFF1A;&#x53EA;&#x6709;&#x5728;&#x6536;&#x5230;&#x6CA1;&#x6709;&#x6355;&#x6349;&#x5230;&#x7684;&#x4FE1;&#x53F7;&#x7EC8;&#x6B62;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x91CD;&#x542F;<br>\non-watchdog&#xFF1A;&#x8D85;&#x65F6;&#x9000;&#x51FA;&#xFF0C;&#x624D;&#x4F1A;&#x91CD;&#x542F;<br>\nalways&#xFF1A;&#x4E0D;&#x7BA1;&#x662F;&#x4EC0;&#x4E48;&#x9000;&#x51FA;&#x539F;&#x56E0;&#xFF0C;&#x603B;&#x662F;&#x91CD;&#x542F;<br>\n</p>\n<p>\nRestartSec &#x5B57;&#x6BB5;&#xFF1A;&#x8868;&#x793A; Systemd &#x91CD;&#x542F;&#x670D;&#x52A1;&#x4E4B;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x7684;&#x79D2;&#x6570;\n</p>\n<ol class=\"org-ol\">\n<li>Install &#x533A;&#x5757;\n</li>\n</ol>\n<p>\nInstall &#x533A;&#x5757;&#xFF0C;&#x5B9A;&#x4E49;&#x5982;&#x4F55;&#x5B89;&#x88C5;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5373;&#x600E;&#x6837;&#x505A;&#x5230;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x3002;WantedBy &#x5B57;&#x6BB5;&#xFF1A;&#x8868;&#x793A;&#x8BE5;&#x670D;&#x52A1;&#x6240;&#x5728;&#x7684; Target&#x3002;\nTarget &#x7684;&#x542B;&#x4E49;&#x662F;&#x670D;&#x52A1;&#x7EC4;&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x7EC4;&#x670D;&#x52A1;&#x3002;WantedBy=multi-user.target &#x6307;&#x7684;&#x662F;&#xFF0C;my.service &#x6240;&#x5728;&#x7684; Target &#x662F; multi-user.target&#x3002;\n</p>\n\n<p>\n&#x8FD9;&#x4E2A;&#x8BBE;&#x7F6E;&#x975E;&#x5E38;&#x91CD;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;&#x6267;&#x884C; systemctl enable sshd.service &#x547D;&#x4EE4;&#x65F6;&#xFF0C;sshd.service &#x7684;&#x4E00;&#x4E2A;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#xFF0C;\n&#x5C31;&#x4F1A;&#x653E;&#x5728;/etc/systemd/system &#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x7684; multi-user.target.wants &#x5B50;&#x76EE;&#x5F55;&#x4E4B;&#x4E2D;&#x3002;\n&#x4E0A;&#x9762;&#x7684;&#x7ED3;&#x679C;&#x8868;&#x793A;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;&#x542F;&#x52A8; Target &#x662F; multi-user.target&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x7EC4;&#x91CC;&#x7684;&#x6240;&#x6709;&#x670D;&#x52A1;&#xFF0C;&#x90FD;&#x5C06;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x3002;\n&#x8FD9;&#x5C31;&#x662F;&#x4E3A;&#x4EC0;&#x4E48; systemctl enable &#x547D;&#x4EE4;&#x80FD;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x7684;&#x539F;&#x56E0;&#x3002;\n&#x4F7F;&#x7528; Target &#x7684;&#x65F6;&#x5019;&#xFF0C;systemctl list-dependencies &#x547D;&#x4EE4;&#x548C; systemctl isolate &#x547D;&#x4EE4;&#x4E5F;&#x5F88;&#x6709;&#x7528;\n</p>\n\n<div class=\"org-src-container\">\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B; multi-user.target &#x5305;&#x542B;&#x7684;&#x6240;&#x6709;&#x670D;&#x52A1;</span></span><br><span class=\"line\">systemctl list-dependencies multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5207;&#x6362;&#x5230;&#x53E6;&#x4E00;&#x4E2A; target</span></span><br><span class=\"line\"><span class=\"comment\"># shutdown.target &#x5C31;&#x662F;&#x5173;&#x673A;&#x72B6;</span></span><br><span class=\"line\">sudo systemctl isolate shutdown.target</span><br></pre></td></tr></table></figure>\n</div>\n<p>\n&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5E38;&#x7528;&#x7684; Target &#x6709;&#x4E24;&#x4E2A;&#xFF1A;&#x4E00;&#x4E2A;&#x662F; multi-user.target&#xFF0C;&#x8868;&#x793A;&#x591A;&#x7528;&#x6237;&#x547D;&#x4EE4;&#x884C;&#x72B6;&#x6001;&#xFF1B;&#x53E6;&#x4E00;&#x4E2A;&#x662F; graphical.target&#xFF0C;&#x8868;&#x793A;&#x56FE;&#x5F62;&#x7528;&#x6237;&#x72B6;&#x6001;&#xFF0C;&#x5B83;&#x4F9D;&#x8D56;&#x4E8E; multi-user.target&#x3002;\n&#x5B98;&#x65B9;&#x6587;&#x6863;&#x6709;&#x4E00;&#x5F20;&#x975E;&#x5E38;&#x6E05;&#x6670;&#x7684; [[<a href=\"https://www.freedesktop.org/software/systemd/man/bootup.html#System%20Manager%20Bootup\">https://www.freedesktop.org/software/systemd/man/bootup.html#System%20Manager%20Bootup</a>][Target &#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x56FE;]]\n</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-2\" class=\"outline-3\">\n<h3 id=\"sec-1-2\"><span class=\"section-number-3\">1.2</span> Target &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3>\n<div class=\"outline-text-3\" id=\"text-1-2\">\n<p>\nTarget &#x4E5F;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;\n</p>\n\n<div class=\"org-src-container\">\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#  This file is part of systemd.\n#\n#  systemd is free software; you can redistribute it and/or modify it\n#  under the terms of the GNU Lesser General Public License as published by\n#  the Free Software Foundation; either version 2.1 of the License, or\n#  (at your option) any later version.\n\n[Unit]\nDescription=Multi-User System\nDocumentation=man:systemd.special(7)\nRequires=basic.target\nConflicts=rescue.service rescue.target\nAfter=basic.target rescue.service rescue.target\nAllowIsolate=yes\n\n[Install]\nAlias=default.target</span><br></pre></td></tr></table></figure>\n</div>\n<p class=\"verse\">\nRequires &#x5B57;&#x6BB5;&#xFF1A;&#x8981;&#x6C42; basic.target &#x4E00;&#x8D77;&#x8FD0;&#x884C;&#x3002;<br>\nConflicts &#x5B57;&#x6BB5;&#xFF1A;&#x51B2;&#x7A81;&#x5B57;&#x6BB5;&#x3002;&#x5982;&#x679C; rescue.service &#x6216; rescue.target &#x6B63;&#x5728;&#x8FD0;&#x884C;&#xFF0C;multi-user.target &#x5C31;&#x4E0D;&#x80FD;&#x8FD0;&#x884C;&#xFF0C;&#x53CD;&#x4E4B;&#x4EA6;&#x7136;&#x3002;<br>\nAfter&#xFF1A;&#x8868;&#x793A; multi-user.target &#x5728; basic.target&#x3001;rescue.service&#x3001;rescue.target &#x4E4B;&#x540E;&#x542F;&#x52A8;&#xFF0C;&#x5982;&#x679C;&#x5B83;&#x4EEC;&#x6709;&#x542F;&#x52A8;&#x7684;&#x8BDD;&#x3002;<br>\nAllowIsolate&#xFF1A;&#x5141;&#x8BB8;&#x4F7F;&#x7528; systemctl isolate &#x547D;&#x4EE4;&#x5207;&#x6362;&#x5230; multi-user.target&#x3002;<br>\n</p>\n</div>\n</div>\n</div>\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\"><span class=\"section-number-2\">2</span> systemct &#x547D;&#x4EE4;</h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<div class=\"org-src-container\">\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\"><span class=\"comment\"># &#x91CD;&#x542F;&#x76F8;&#x5173;&#x670D;&#x52A1;</span></span><br><span class=\"line\">sudo systemctl restart my</span><br><span class=\"line\"><span class=\"comment\">#&#x5F00;&#x673A;&#x542F;&#x52A8;</span></span><br><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> my</span><br><span class=\"line\"><span class=\"comment\">#&#x542F;&#x52A8;&#x670D;&#x52A1;</span></span><br><span class=\"line\">sudo systemctl start my</span><br><span class=\"line\"><span class=\"comment\">#&#x670D;&#x52A1;&#x7684;&#x72B6;&#x6001;</span></span><br><span class=\"line\">sudo systemctl status my</span><br><span class=\"line\"><span class=\"comment\">#&#x505C;&#x6B62;&#x670D;&#x52A1;</span></span><br><span class=\"line\">sudo systemctl stop my</span><br></pre></td></tr></table></figure>\n</div>\n<p>\nstatus &#x72B6;&#x6001;&#x8BF4;&#x660E;\n</p>\n\n<div class=\"org-src-container\">\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">infrec.service - infrec\nLoaded: loaded (/usr/lib/systemd/system/infrec.service; enabled)\nActive: active (running) since Thu 2017-12-07 13:38:16 CST; 1h 8min ago\nMain PID: 13187 (gunicorn)\nCGroup: /system.slice/infrec.service\n&#x251C;&#x2500;13187 /home/lytz/.virtualenvs/xn_infrec/bin/python3 /home/lytz/....\n&#x251C;&#x2500;13190 /home/lytz/.virtualenvs/xn_infrec/bin/python3 /home/lytz/....\n&#x251C;&#x2500;13198 /home/lytz/.virtualenvs/xn_infrec/bin/python3 /home/lytz/....\n&#x251C;&#x2500;13206 /home/lytz/.virtualenvs/xn_infrec/bin/python3 /home/lytz/....\n&#x2514;&#x2500;13207 /home/lytz/.virtualenvs/xn_infrec/bin/python3 /home/lytz/....</span><br></pre></td></tr></table></figure>\n</div>\n<p class=\"verse\">\nLoaded &#x884C;&#xFF1A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x662F;&#x5426;&#x8BBE;&#x4E3A;&#x5F00;&#x673A;&#x542F;&#x52A8;<br>\nActive &#x884C;&#xFF1A;&#x8868;&#x793A;&#x6B63;&#x5728;&#x8FD0;&#x884C;<br>\nMain PID &#x884C;&#xFF1A;&#x4E3B;&#x8FDB;&#x7A0B; ID<br>\nStatus &#x884C;&#xFF1A;&#x7531;&#x5E94;&#x7528;&#x672C;&#x8EAB;&#xFF08;&#x8FD9;&#x91CC;&#x662F; httpd&#xFF09;&#x63D0;&#x4F9B;&#x7684;&#x8F6F;&#x4EF6;&#x5F53;&#x524D;&#x72B6;&#x6001;<br>\nCGroup &#x5757;&#xFF1A;&#x5E94;&#x7528;&#x7684;&#x6240;&#x6709;&#x5B50;&#x8FDB;&#x7A0B;<br>\n&#x65E5;&#x5FD7;&#x5757;&#xFF1A;&#x5E94;&#x7528;&#x7684;&#x65E5;&#x5FD7;<br>\n</p>\n</div>\n</div>\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\"><span class=\"section-number-2\">3</span> Journalctl</h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\nJournal &#x7684;&#x5B9E;&#x73B0;&#x5F52;&#x529F;&#x4E8E; journald &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x5176;&#x8D1F;&#x8D23;&#x5904;&#x7406;&#x7531;&#x5185;&#x6838;&#x3001;initrd &#x4EE5;&#x53CA;&#x670D;&#x52A1;&#x7B49;&#x4EA7;&#x751F;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x8981;&#x67E5;&#x770B; journald &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x6536;&#x96C6;&#x5230;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x53EF;&#x4F7F;&#x7528; journalctl &#x547D;&#x4EE4;&#x3002;\n</p>\n</div>\n<div id=\"outline-container-sec-3-1\" class=\"outline-3\">\n<h3 id=\"sec-3-1\"><span class=\"section-number-3\">3.1</span> &#x6309;&#x4FE1;&#x606F;&#x7C7B;&#x578B;&#x8FC7;&#x6EE4;</h3>\n<div class=\"outline-text-3\" id=\"text-3-1\">\n<ol class=\"org-ol\">\n<li>&#x6309;&#x5355;&#x5143;,&#x5982;&#x67E5;&#x770B;&#x4E0A;&#x9762;&#x7684; my.service &#x65E5;&#x5FD7;\n\n<div class=\"org-src-container\">\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">journalctl -u my.service</span><br></pre></td></tr></table></figure>\n</div>\n</li>\n</ol>\n</div>\n</div>\n</div>\n</nil>\n"}
